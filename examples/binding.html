<!doctype html>
<html lang="en">
<head>
    <title>Basic - Declarativ Examples</title>
</head>
<body>
<div id="render-target"></div>
<script type="text/javascript" src="https://unpkg.com/jquery@3.3.1/dist/jquery.min.js"></script>
<script type="text/javascript" src="../dist/declarativ.js"></script>
<script>
    const { renderElement, elements: el } = declarativ;

    // This example shows some of the things possible with the data handling functions
    // described in https://github.com/fennifith/declarativ#handling-data
    //
    // These data structures do exist IRL, and are taken from the GitHub API - I'm just
    // hardcoding them here as an example.

    // the data structure to bind
    let repoData = {
        full_name: "fennifith/declarativ",
        description: "This is definitely not JSX.",
        html_url: "https://github.com/fennifith/declarativ"
    };

    // another data structure to bind (but this one takes a few seconds to resolve)
    let userData = new Promise((resolve) => {
        setTimeout(() => {
            resolve({
                login: "fennifith",
                name: "James Fenn",
                bio: "Enjoys writing software on loud keyboards. Starts too many projects. Consumes food.",
                avatar_url: "https://avatars1.githubusercontent.com/u/13000407?v=4",
                html_url: "https://github.com/fennifith",
                blog: "https://jfenn.me/"
            });
        }, 3000);
    });

    renderElement(
        $("#render-target"),
        el.div(
            el.h1("Repository Information"),
            el.div(
                el.h3((repo) => repo.full_name),
                el.p((repo) => repo.description),
                el.a("View on GitHub").attr("href", (repo) => repo.html_url)
            ).bind(repoData),
            el.h2("Author"),
            el.div(
                el.img().attr("src", (user) => user.avatar_url),
                el.h3((user) => `${user.name} (@${user.login})`),
                el.p((user) => user.bio),
                el.ul(
                    el.li(
                        el.a("View on GitHub").attr("href", (user) => user.html_url)
                    ),
                    el.li(
                        el.a("Open blog").attr("href", (user) => user.blog)
                    )
                )
            ).bind(userData)
        )
    );
</script>
</body>
</html>
