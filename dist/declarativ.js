!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?exports.declarativ=t(require("jquery")):e.declarativ=t(e.jQuery)}(window,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){const r=n(1),{Component:o}=n(4);function i(e){return function(...t){return e.withChildrenArray(t)}}async function a(e,t){return console.log("rendering",e),e.render(null,t)}e.exports={Component:o,wrapCompose:i,compose:function(e){return i(new o(e))},render:a,renderElement:async function(e,t){let n=r.createHtml("<template></template>");return(e=r.element(e)).clear(),e.appendChild(n),a(t,n)}}},function(e,t,n){class r{constructor(e){this.element=e}insertBefore(e,t){throw"No insertBefore implementation"}remove(){throw"No remove implementation"}replaceWith(e,t){throw"No replaceWith implementation"}find(e){throw"No find implementation"}appendChild(e){throw"No appendChild implementation"}clear(){throw"No clear implementation"}}class o extends r{constructor(e){super(e)}insertBefore(e,t){this.element.insertBefore(e,t)}remove(){this.element.remove()}replaceWith(e,t){if(this.element.replaceWith)this.element.replaceWith(e);else{if(!t)throw"Cannot replace element; no parent defined.";t.replaceChild(e,this.element)}}find(e){return this.element.querySelector(e)}appendChild(e){this.element.appendChild(e)}clear(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}}class i extends r{constructor(e){super(e)}insertBefore(e,t){const r=n(2);r(e).insertBefore(r(t))}remove(){this.element.remove()}replaceWith(e){this.element.replaceWith($(e))}find(e){return this.element.find(e)}appendChild(e){const t=n(2);this.element.append(t(e))}clear(){this.element.clear()}}e.exports={createHtml:function(e){let t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild},createText:function(e){return document.createTextNode(e)},element:function(e){if(e instanceof r)return e;if(e instanceof HTMLElement)return new o(e);if(e instanceof jQuery)return new i(e);throw"Cannot implement element "+e}}},function(t,n){t.exports=e},function(e,t,n){const{compose:r,wrapCompose:o,render:i,renderElement:a}=n(0),s=n(6);e.exports={compose:r,wrapCompose:o,render:i,renderElement:a,elements:s}},function(e,t,n){const{DataResolvable:r,PendingTasks:o,forEachAsync:i,escapeHtml:a}=n(5),s=n(1);class l{constructor(e){this.children=(e||[]).map(e=>new r(e)),this.data=new r(e=>e)}withChildren(...e){return this.withChildrenArray(e)}withChildrenArray(e){let t=this.clone();return t.children=e.map(e=>new r(e)),t}bind(e){let t=this.clone();return t.data=new r(e),t}clone(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}isBlocking(){return this.data.isBlocking()}forEach(...e){return this.withChildren(function(t){return Object.values(t).map(t=>e.map(function(e){return e instanceof u?e.bind(t):new r(e).resolve(t)}))})}async resolveChildren(e){let t=[],n=async function(o){let i=await o.resolve(e);i instanceof Array?await Promise.all(Object.values(i).map(e=>n(new r(e)))):t.push(function(e){if(e instanceof l)return e;if("string"==typeof e)return new c(e);throw"declarativ: Cannot resolve passed node: "+e}(i))};return console.log(this.children),await Promise.all(Object.values(this.children).map(n)),t}async renderString(e){throw"No renderString implementation"}async render(e,t){throw"No render implementation."}}class c extends l{constructor(e){super(),this.text=e}isBlocking(){return!1}async renderString(e){return a(this.text)}async render(e,t){let n=s.createText(this.text);return t&&s.element(t).replaceWith(n),n}}class u extends l{constructor(e,t){super(t),this.template=e,this.tasks=new o}run(e){let t=this.clone();return t.tasks=new o(this.tasks).push(e),t}async renderString(e){let t=await this.data.resolve(e),n="";return await i(await this.resolveChildren(t),async function(t){n+=await t.renderString(e)}),this.template(n,t)}async render(e,t){let n=await this.data.resolve(e),r="",o={};await i(await this.resolveChildren(n),async function(t){if(t.isBlocking()){let e=`render-${Math.floor(1e3*Math.random())}-${Date.now()}`;r+=`<template id="${e}"></template>`,o[e]=t}else r+=await t.renderString(e)});let a=s.createHtml(this.template(r,n)),l=s.element(a);return await this.tasks.call(a,n),t&&s.element(t).replaceWith(a),await Promise.all(Object.keys(o).map(function(e){let t=l.find(`template#${e}`);return o[e].render(n,t)})),a}}e.exports={Component:u}},function(e,t){class n{constructor(e){this.value=e instanceof n?e.value:e}isBlocking(){return this.value instanceof Promise}async resolve(e){return this.value instanceof Promise?await this.value:"function"==typeof this.value?this.value(e):this.value}}class r{constructor(e){e instanceof r?this.tasks=Object.values(e.tasks):e instanceof Array?this.tasks=Object.values(e):this.tasks=[]}push(e){return this.tasks.push(e),this}async call(...e){return Promise.all(this.tasks.map(function(t){let n=t.apply(null,e);return n instanceof Promise?n:Promise.resolve()}))}}e.exports={DataResolvable:n,PendingTasks:r,forEachAsync:async function(e,t){for(let n in Object.values(e))await t(e[n],n)},escapeHtml:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}}},function(e,t,n){const{compose:r}=n(0);t.address=r(e=>`<address>${e}</address>`),t.article=r(e=>`<article>${e}</article>`),t.aside=r(e=>`<aside>${e}</aside>`),t.footer=r(e=>`<footer>${e}</footer>`),t.header=r(e=>`<header>${e}</header>`),t.h1=r(e=>`<h1>${e}</h1>`),t.h2=r(e=>`<h2>${e}</h2>`),t.h3=r(e=>`<h3>${e}</h3>`),t.h4=r(e=>`<h4>${e}</h4>`),t.h5=r(e=>`<h5>${e}</h5>`),t.main=r(e=>`<main>${e}</main>`),t.nav=r(e=>`<nav>${e}</nav>`),t.section=r(e=>`<section>${e}</section>`),t.blockquote=r(e=>`<blockquote>${e}</blockquote>`),t.div=r(e=>`<div>${e}</div>`),t.hr=r(e=>`<hr>${e}</hr>`),t.li=r(e=>`<li>${e}</li>`),t.main=r(e=>`<main>${e}</main>`),t.ol=r(e=>`<ol>${e}</ol>`),t.p=r(e=>`<p>${e}</p>`),t.pre=r(e=>`<pre>${e}</pre>`),t.ul=r(e=>`<ul>${e}</ul>`),t.a=r(e=>`<a>${e}</a>`),t.br=r(e=>`<br>${e}</br>`),t.code=r(e=>`<code>${e}</code>`),t.em=r(e=>`<em>${e}</em>`),t.i=r(e=>`<i>${e}</i>`),t.small=r(e=>`<small>${e}</small>`),t.span=r(e=>`<span>${e}</span>`),t.strong=r(e=>`<strong>${e}</strong>`),t.sub=r(e=>`<sub>${e}</sub>`),t.sup=r(e=>`<sup>${e}</sup>`),t.time=r(e=>`<time>${e}</time>`),t.area=r(e=>`<area>${e}</area>`),t.audio=r(e=>`<audio>${e}</audio>`),t.img=r(e=>`<img>${e}</img>`),t.map=r(e=>`<map>${e}</map>`),t.track=r(e=>`<track>${e}</track>`),t.video=r(e=>`<video>${e}</video>`),t.embed=r(e=>`<embed>${e}</embed>`),t.iframe=r(e=>`<iframe>${e}</iframe>`),t.noembed=r(e=>`<noembed>${e}</noembed>`),t.object=r(e=>`<object>${e}</object>`),t.picture=r(e=>`<picture>${e}</picture>`),t.source=r(e=>`<source>${e}</source>`),t.canvas=r(e=>`<canvas>${e}</canvas>`),t.caption=r(e=>`<caption>${e}</caption>`),t.col=r(e=>`<col>${e}</col>`),t.colgroup=r(e=>`<colgroup>${e}</colgroup>`),t.table=r(e=>`<table>${e}</table>`),t.tbody=r(e=>`<tbody>${e}</tbody>`),t.td=r(e=>`<td>${e}</td>`),t.tfoot=r(e=>`<tfoot>${e}</tfoot>`),t.th=r(e=>`<th>${e}</th>`),t.thead=r(e=>`<thead>${e}</thead>`),t.tr=r(e=>`<tr>${e}</tr>`),t.button=r(e=>`<button>${e}</button>`),t.datalist=r(e=>`<datalist>${e}</datalist>`),t.fieldset=r(e=>`<fieldset>${e}</fieldset>`),t.form=r(e=>`<form>${e}</form>`),t.input=r(e=>`<input>${e}</input>`),t.label=r(e=>`<label>${e}</label>`),t.legend=r(e=>`<legend>${e}</legend>`),t.meter=r(e=>`<meter>${e}</meter>`),t.optgroup=r(e=>`<optgroup>${e}</optgroup>`),t.option=r(e=>`<option>${e}</option>`),t.select=r(e=>`<select>${e}</select>`),t.textarea=r(e=>`<textarea>${e}</textarea>`),t.details=r(e=>`<details>${e}</details>`),t.summary=r(e=>`<summary>${e}</summary>`)}])});